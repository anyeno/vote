
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>投票系统</title>
    <style>
    .body{
        width: 100%;
        height: 100%;
        margin: 0;
        background-color: rgb(80, 74, 74);

    }    

        /*顶栏*/
        .top-bar {
    width: 100%;
    height: 50px;
    margin: 0;
    display: flex;
    clear:both;
    
}
    .box-top {
    width: 100%;
    min-width: 1350px;
    background-color: rgb(41, 37, 37);
   
    padding: 20px;
    /*border-bottom-left-radius: 8px;*/
    /*border-bottom-right-radius: 8px;*/
}

    .top-ui {
    width: 100%;
    min-width: 800px;
    height: 50px;
    list-style: none;
    margin: 0;
    padding: 0;
}
    .top-vote{
    width:30%;
    min-width: 40px;  
    margin:-5px 10px 0 50px;    
    float: left;
    }
    .top-user{
    width:10%;
    margin:-5px 10px 0 100px;    
    float: left;
    }
    .top-ui li{
    width:20%;
    min-width: 25px;
    margin:0 5px 0 5px;
    float: left;
    text-align: center;
    display: block;
}
    .top-ui a,span{
        /* 不换行 */
    white-space:nowrap;
    color: white;
    text-decoration: none;
}
    .top-ui a:hover{
    color: white;
    font-weight: bolder;
}
    .top-ui img{
    height: 40px;
    margin: 0;
    padding: 0;
    display: inline;
    position: relative;
    top: -10px;
}

    .mid{
     width:100%;
     height:500px;
     background-repeat:no-repeat;
     background-size: 100%,100%;
     background-image: url('../images/index3.webp');
     /* margin-left:10% ; */
     /* background-size: 450px;设置图片大小 */
     /* background-color: black;    */

}
    .midtext{
        padding-top:13% ;
        padding-left:20% ;
        

    }
    .mid h2{
        width:50% ;
        margin: 0 auto;
        margin-bottom: 28px;
        font-size: 250%;
        color: white;
        text-decoration: none;
    }
    .mid span{
        margin-left: 20%;

    }
    .source{
        width: 100%;
        height: 200px;
        /* background-color: aqua; */

    }
    .source_text{
        height: 40%;
        /* background-color: black; */
    }
    .source_text h3{
        width:20% ;
        margin: 0;
        margin-left:47% ;
        padding-top: 40px;
        font-size: 130%;
        color: white;
        text-decoration: none;
    }
    .source_ul{
        margin-top: 0;
        margin-bottom: 0;
        /* padding-top: 40px; */
        padding-left: 31%;
        width: 80%;
        height: 50%;

    }
    .source_ul li{
        width:14%;
     min-width: 25px;
     margin:0 0px 0 0px;
     padding-left:30px;
     float: left;
     text-align: center;
     display: block;

    }
    .img{
        width:170px ;
        height: 80px;
        /* 圆角 */
        border-radius: 15px;
    }

    .bottom{
    width: 100%;
    min-width: 1350px;
    background-color: rgb(52, 48, 48);
    height:40px ;
    margin-top:1% ;

    }
    .bottom_span{

        color: white;
        padding-left:49% ;

    }
    .bottom_in{
        height:30px ;
    
    }

       
    
    
    </style>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>

</head>

<body class="body">
        <div class="top-bar">
        <div class="box-top">
            <ul class="top-ui">
            <div class="top-vote">
                <li>
                    <a href="index.html"> 首页</a>
                </li>
                <li id="add_new_vote">
                    <a  href="管理新添投票.html"> 新增投票</a>  
                </li>  
                <li>
                    <a href="用户投票频道.html"> 查看投票频道</a>
                </li>
            </div c>
            <div class="top-vote">
                <span class="login_and_register">
                <li>           
                    <a href="用户登录.html">登录</a>
                </li>
                <li>              
                    <a href="用户注册.html">注册</a>
                </li></span>
                
            </div>    
            <div class="top-user" >
                <li><span id="username"></span></li>
            </div> 
            <span id="logout">
                <li>
                    <a href="" id="logout" >  退出 </a>
                </li>
            </span>   
            </div>    
            </ul>
        </div>
    </div>
    <div class="mid">
        <div class="midtext">
            <h2 >用户投票管理系统</h2>
            <span>一个实现用户-管理员登录管理及投票频道,实体，选项管理的系统</span>
        </div>    
        
    </div>
    <div class="source">
        <div class="source_text">
            <h3>tips:网站技术栈</h3>
        </div>
        <ul class="source_ul">
            <li><a href="https://springboot.io/"><img src="../images/springboot.webp" class="img"></a></li>
            <li><a href="https://www.redis.net.cn/"><img src="../images/redis.jpg"  class="img"></a></li>
            <li><a href="https://baomidou.com/"><img src="../images/mybatisplus.webp" class="img"></a></li>
        </ul>

    </div>
    <div class="bottom">
        <div class="bottom_in">
            <span class="bottom_span">2022-11-2</span>
        </div>
        
    </div>

     <script>
        if(window.localStorage.getItem("token") != null) {
            $("#username").text("欢迎:" + window.localStorage.getItem("username"));
            $(".login_and_register").hide();
            $("#logout").show();
            delete_delete()
        } else {
            $(".login_and_register").show();
            $("#logout").hide();
            delete_delete()
        }

        function delete_delete() {
            if(window.localStorage.getItem("isAdmin") != "true")
            {
                $("#add_new_vote").hide();
            }
            console.log(window.localStorage.getItem("isAdmin"))
        }
        $("#logout").click(function() {
            let token = window.localStorage.getItem("token");
            $.ajax({
                url: "http://127.0.0.1:3000/user/logout",
                dataType: "text",
                type: "GET",
                // beforeSend: function(request) {
                //     request.setRequestHeader("token",window.localStorage.getItem("token"));
                // },
                headers:{
                    'Content-Type':'application/json;charset=utf8',
                    "token": token
                },
                success(resp) {
                    console.log(resp)
                    console.log("退出成功")
                },
                error(resp) {
                    console.log("failed");
                    console.log(resp)
                }
            })
            console.log("type" + typeof window.localStorage.getItem("token"));
            console.log(window.localStorage.getItem("token"))
            window.localStorage.removeItem("token");
        })
    </script>
</body>
   

   